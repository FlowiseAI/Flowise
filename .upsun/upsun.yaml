applications:
  - name: flowise-app
    type: "nodejs:18"  # Specify the Node.js runtime version

    build:
      flavor: none  # Disable the default npm build

    hooks:
      build: |
        # Install Yarn (latest stable version which supports workspaces)
        npm install -g yarn
        # Use Yarn to install dependencies without creating or modifying the lockfile
        yarn install --frozen-lockfile

      deploy: |
        # Use Yarn to build the application
        yarn build

    web:
      commands:
        start: "yarn start"

routes:
  "https://{default}/":
    type: upstream
    upstream: flowise-app:http
