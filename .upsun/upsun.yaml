applications:
  - name: flowise-app
    type: "nodejs:22"  # Specify the Node.js runtime version

    build:
      flavor: none  # Disable the default npm build

    hooks:
      build: |
        # Install Yarn version 3 explicitly
        npm install -g yarn@3
        # Use Yarn to install dependencies
        yarn install --frozen-lockfile

      deploy: |
        # Use Yarn to build the application
        yarn run build

    web:
      commands:
        start: "yarn start"

routes:
  "https://{default}/":
    type: upstream
    upstream: flowise-app:http
