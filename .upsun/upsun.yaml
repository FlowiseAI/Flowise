applications:
  - name: flowise-app
    type: "nodejs:19"  # Specify the Node.js runtime version

    build:
      flavor: none  # Disable the default npm build

    hooks:
      build: |
        # Enable Corepack to make Yarn available
        corepack enable
        # Use Yarn to install dependencies
        corepack yarn install --frozen-lockfile

      deploy: |
        # Use Yarn to build the application
        corepack yarn run build

    web:
      commands:
        start: "corepack yarn start"

routes:
  "https://{default}/":
    type: upstream
    upstream: flowise-app:http
