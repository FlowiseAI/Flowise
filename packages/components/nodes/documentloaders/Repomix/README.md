# Repomix Document Loader

A specialized document loader that processes GitHub repositories and XML files generated by Repomix with advanced content cleaning and URL generation capabilities.

## Features

- **GitHub Integration**: Load individual files from public GitHub repositories
- **XML File Support**: Parse XML files generated by Repomix with proper file structure
- **Content Cleaning**: Advanced filtering to remove unwanted patterns and lines
- **URL Generation**: Automatically generate public URLs for documentation sites
- **Text Splitting**: Built-in support for text splitters with configurable chunking
- **Flexible Metadata**: Rich metadata including GitHub URLs, public URLs, and original paths

## Input Options

### GitHub URLs
- Accepts comma-separated GitHub URLs for individual files
- Public repositories only (no authentication required)
- Example: `https://github.com/owner/repo/blob/main/docs/file.md`

### XML Files
- Upload XML files generated by Repomix (e.g., from `blog-docs.xml`, `documentation.xml`)
- Automatically parses individual files from XML structure
- Supports file storage system for larger documents

## Configuration Options

### URL Prefix (Optional)
- Base URL for generating public documentation URLs
- Example: `https://answeragent.ai/docs`
- When combined with file paths, creates accessible public URLs

### Extensions to Remove
- Comma-separated list of file extensions to remove when generating public URLs
- Default: `.md,.tsx,.mdx`
- Example: `docs/file.md` becomes `https://answeragent.ai/docs/docs/file`

### Content Cleaning
- **Clean Content**: Enable/disable content filtering
- **Exclusion Patterns**: Regex patterns to filter out unwanted lines
- Default pattern: `^\\s*api:\\s*` (removes lines starting with "api:")
- Multiple patterns supported (one per line)

## Metadata Structure

Each document includes rich metadata:

```json
{
  "githubUrl": "https://github.com/owner/repo/blob/main/docs/file.md",
  "originalPath": "docs/file.md",
  "publicUrl": "https://answeragent.ai/docs/docs/file",
  "source": "xml_upload", // or omitted for GitHub sources
  "cleaned": true // indicates if content cleaning was applied
}
```

## Usage Examples

### Loading from GitHub with Cleaning
1. Set GitHub URLs: `https://github.com/owner/repo/blob/main/README.md`
2. Set URL Prefix: `https://mysite.com/docs`
3. Extensions to Remove: `.md,.mdx`
4. Enable Clean Content: `true`
5. Exclusion Patterns: `^\\s*api:\\s*\\n^\\s*debug:\\s*`
6. Result: Cleaned content with public URL `https://mysite.com/docs/README`

### Loading from XML with Custom Patterns
1. Upload XML file (e.g., `documentation.xml`)
2. Set URL Prefix: `https://mysite.com/docs`
3. Enable Clean Content: `true`
4. Add custom exclusion patterns to filter specific content
5. Each `<file path="...">` becomes a separate cleaned document

## Content Cleaning Patterns

The content cleaning feature uses regex patterns to filter out unwanted lines. Common patterns:

- `^\\s*api:\\s*` - Remove lines starting with "api:"
- `^\\s*debug:\\s*` - Remove lines starting with "debug:"
- `^\\s*//.*TODO` - Remove TODO comments
- `^\\s*console\\.log` - Remove console.log statements

## Integration

- Works with all text splitters for chunking large documents
- Supports additional metadata injection
- Compatible with metadata key omission for fine-tuned output
- Returns both Document objects and concatenated text

## Best Practices

1. **Use URL Prefix**: Essential for generating accessible documentation URLs
2. **Configure Extensions**: Remove file extensions that shouldn't appear in URLs
3. **Text Splitting**: Recommended for large documentation files (default: 4,000 tokens)
4. **Content Cleaning**: Use regex patterns to remove unwanted content like API logs or debug information
5. **Pattern Testing**: Test exclusion patterns on sample content before applying to large datasets
6. **Metadata Management**: Use omit keys to control what metadata is included 